<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:rabbit="http://www.springframework.org/schema/rabbit"
       xmlns:util="http://www.springframework.org/schema/util"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/rabbit http://www.springframework.org/schema/rabbit/spring-rabbit.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <context:property-placeholder location="classpath:application.properties"/>

    <util:properties id="appConfig" location="classpath:application.properties"></util:properties>

    <!--================================================通用配置========================================================-->
    <rabbit:connection-factory id="connectionFactory"
                               username="${rabbitmq.username}"
                               addresses="${rabbitmq.addresses}"
                               password="${rabbitmq.password}"
                               virtual-host="/"
                               channel-cache-size="5"
                               publisher-confirms="true"/>

    <rabbit:admin connection-factory="connectionFactory"/>

    <bean id="messageConverter" class="org.springframework.amqp.support.converter.Jackson2JsonMessageConverter"/>
    <!--================================================通用配置========================================================-->

    <!--生产者配置-->
    <rabbit:template id="amqpTemplate" message-converter="messageConverter"
                     connection-factory="connectionFactory" reply-timeout="2000"
                       /><!--exchange="icx.growth.test.topic.exchange"-->


    <!--队列配置-->
    <!--<rabbit:queue name="ccs.queue.topic1" />
    <rabbit:topic-exchange name="rabbitmq.topic.exchange">
        <rabbit:bindings>
            <rabbit:binding queue="ccs.queue.topic1" pattern="ccs.binding.#"/>
        </rabbit:bindings>
    </rabbit:topic-exchange>-->


    <!--消费者配置-->
    <!--<rabbit:annotation-driven/>

    <bean id="rabbitListenerContainerFactory"
          class="org.springframework.amqp.rabbit.config.SimpleRabbitListenerContainerFactory">
        <property name="connectionFactory" ref="connectionFactory"/>
        <property name="concurrentConsumers" value="3"/>
        <property name="maxConcurrentConsumers" value="10"/>
        <property name="acknowledgeMode" value="AUTO"/>
        <property name="messageConverter" ref="messageConverter"/>
    </bean>-->

    <!--这里配置了默认的 exchange 与 routing-key ， 也可以不配置 ， 调用 converAndSend 的时候通过方法参数传入 -->
    <!--messageConverter 设置 JavaBean 的序列化方式-->
    <!--<rabbit:template id="amqpTemplate"
                     connection-factory="connectionFactory"
                     message-converter="messageConverter"
                     exchange="rabbitmq.topic.exchange"/>-->


</beans>